(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,i){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,i||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(s,"string"),"symbol"===t(a)?a:String(a)),n)}var s,a}function i(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(t,e,r,n){"use strict";var s="torq_filterable_gallery",a=i((function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=i,this.$_element=t(this._element),this.$_config=this.$_element.find(".torq-filterable-gallery").data("config"),this.$_items=this.$_element.find(".torq-items"),this.$_item=this.$_items.find(".torq-item"),this.$_pagiWrap=this.$_element.find(".torq-pagination-wrap"),this._pluginName=s,this._defaults=t.fn[s].defaults,this._settings=t.extend({},this._defaults,this.$_config),this._currentFilter="*",this._filterValue="",this._itemsPerPageDefault=4,this._itemsPerPage=this._settings.items_per_page?this._settings.items_per_page:this._itemsPerPageDefault,this._currentNumberPages=1,this._init()}));t.extend(a.prototype,{_init:function(){var t=this;"masonry"===t._settings.type?t._masonry():this._grid(),t._settings.hasFilters&&t._filters(),t._settings.lightbox&&t._lightbox(),t._settings.hasPagination&&(t._setPagination(),t._createPagers(),t._goToPage(1))},_setPagination:function(){var e=this,i=1,r=1;e.$_items.children(e._filterValue).each((function(){i>e._itemsPerPage&&(r++,i=1);var n=r.toString(),s=t(this).attr("class").split(" ");s[s.length-1].length<4?(t(this).removeClass(),s.pop(),s.push(n),s=s.join(" "),t(this).addClass(s)):t(this).addClass(n),i++})),e._currentNumberPages=r},changeFilter:function(t){this.$_items.isotope({filter:t})},_goToPage:function(t){var e="."+t.toString()+this.$_element.find(".torq-filters .current a").attr("data-filter");this.changeFilter(e)},_createPagers:function(){var e=this,i="torq-pagination-"+e._settings.order_id,r="data-page",n=0==t("."+i).length?t('<div class="'+i+'"></div>'):t("."+i);n.html("");for(var s=0;s<e._currentNumberPages;s++){var a=t('<a href="javascript:void(0);" class="pager '+(1==s+1?"current":"")+' " '+r+'="'+(s+1)+'"></a>');a.html(s+1);var o=".torq-pagination-"+e._settings.order_id+" a";this.$_element.on("click",o,(function(i){if(i.preventDefault(),!t(this).hasClass("current")){var n=t(this).eq(0).attr(r);t(".pager.current").length&&t(".pager.current").removeClass("current"),t(this).addClass("current"),e._goToPage(n)}})),a.appendTo(n)}e.$_pagiWrap.append(n)},_filters:function(){var e=this;this.$_element.on("click",".torq-filters a",(function(i){i.preventDefault(),t(this).parent().hasClass("current")||(e._filterValue=t(this).attr("data-filter"),e.$_element.find(".torq-filters .current").removeClass("current"),e.$_element.find(".torq-filters a[data-filter='"+e._filterValue+"']").parent().addClass("current"),e._reset(),e._init(),e._settings.hasPagination&&(e._filterValue+=".1"),e.$_items.isotope({filter:e._filterValue}).isotope("layout"))}))},_lightbox:function(){var t=[],e=this._settings.lightboxOpts;e.length>0&&(t=e),this.$_items.find('[data-fancybox="torq-gallery"]').fancybox({buttons:t,animationEffect:"fade"})},_grid:function(){var e=this,i={top:0,left:0,position:0,height:this.$_item.height(),width:this.$_item.width()};e.$_item.each((function(r,n){t(n).data("size",i),t(n).css({height:i.width}),t(n).find(".torq-square").css({height:i.width}),e._loadImage(r)})),e.$_items.isotope({resizesContainer:!1,itemSelector:".torq-item",layoutMode:"packery",packery:{gutter:parseInt(e._settings.gutter)}})},_masonry:function(){var e=this,i={top:0,left:0,width:this.$_item.width(),height:this.$_item.height(),position:0};this.$_item.each((function(r,n){t(n).data("size",i),t(n).find(".pic").css({width:i.width}),e._loadImage(r)})),this.$_items.isotope({itemSelector:".torq-item",layoutMode:"packery",packery:{gutter:parseInt(e._settings.gutter)}})},_reset:function(){"masonry"===this._settings.type?this._masonry():this._grid()},_loadImage:function(t){var e=this.$_item.eq(t).find(".pic"),i={},r=new Image;r.onload=function(){i={width:this.width,height:this.height},e.data("size",i)},"undefined"!==e.attr("src")?r.src=e.attr("src"):r.src=e.data("src")}}),t.fn[s]=function(e){return this.each((function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new a(this,e))})),this},t.fn[s].defaults={}}(jQuery,window,document),jQuery(document).ready((function(){var t=jQuery(".torq_filterable_gallery");jQuery.each(t,(function(){jQuery(this).torq_filterable_gallery()}))}))})();